# Token Spy Configuration
# Copy this file to .env and fill in your values.

# ── Agent Identity ───────────────────────────────────────────────────────────
# Name shown in the dashboard. Each proxy instance should have a unique name.
AGENT_NAME=my-agent

# Port for this proxy instance (default: 9110)
PORT=9110

# ── Upstream API ─────────────────────────────────────────────────────────────
# Where to forward requests. Token Spy routes by endpoint:
#   /v1/messages         -> ANTHROPIC_UPSTREAM
#   /v1/chat/completions -> OPENAI_UPSTREAM

ANTHROPIC_UPSTREAM=https://api.anthropic.com
OPENAI_UPSTREAM=

# API key for the upstream provider (forwarded if the client doesn't send one)
UPSTREAM_API_KEY=

# Provider type for cost calculation: anthropic, openai, moonshot, local
API_PROVIDER=anthropic

# ── Database ─────────────────────────────────────────────────────────────────
# sqlite (default, zero-config) or postgres
DB_BACKEND=sqlite

# PostgreSQL settings (only used when DB_BACKEND=postgres)
DB_HOST=localhost
DB_PORT=5434
DB_NAME=tokenspy
DB_USER=tokenspy
DB_PASSWORD=

# ── Session Management ───────────────────────────────────────────────────────
# These can also be changed at runtime via the dashboard or /api/settings.

# Auto-reset threshold in characters (~4 chars per token)
# SESSION_CHAR_LIMIT=200000

# How often the session manager polls (minutes)
# POLL_INTERVAL_MINUTES=5

# ── Advanced ─────────────────────────────────────────────────────────────────
# Session directories for file-based session management (JSON format)
# AGENT_SESSION_DIRS='{"my-agent":"/path/to/sessions"}'

# Agents running local/self-hosted models (comma-separated, get $0 cost badge)
# LOCAL_MODEL_AGENTS=local-agent-1,local-agent-2

# Path to systemd timer file (for automatic poll interval updates)
# SESSION_TIMER_PATH=/etc/systemd/system/my-session-cleanup.timer
